<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% if form.instance.pk %}Edit Gaji{% else %}Tambah Gaji{% endif %}</title>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

    <style>
    body { margin:0; font-family:"Segoe UI", sans-serif; background:linear-gradient(to bottom right,#071522,#0a1f33); color:white; font-size: 15px; }
    header { background:#0f2a45; padding:25px; text-align:center; font-size:28px; font-weight:600; }
    .wrapper { display:flex; justify-content:center; margin-top:35px; }
    .card { background:rgba(17,45,78,0.85); width:45%; padding:30px; border-radius:18px; box-shadow:0 8px 25px rgba(0,0,0,0.45); }
    
    label { display:block; margin-bottom:10px; font-weight:bold; margin-top: 20px; font-size: 16px; }
    
    input, textarea, select { 
        width:100%; 
        padding: 12px 15px; 
        border:none; 
        border-radius:8px; 
        background:rgba(255,255,255,0.1); 
        color:white; 
        box-sizing: border-box; 
        font-size: 15px; 
    }
    select option { background: #0f2a45; color: white; padding: 10px; }
    
    .button { display:inline-block; padding:12px 24px; background:#3f72af; color:white; border-radius:8px; text-decoration:none; font-weight:bold; margin-right:10px; border: none; cursor: pointer; margin-top: 25px; font-size: 15px;}
    .button:hover { background:#1d4e8c; }

    .info-box { background: rgba(63, 114, 175, 0.2); padding: 15px; border-radius: 8px; font-size: 14px; color: #a3caff; margin-bottom: 20px;line-height: 1.5; }

    .select2-container .select2-selection--single {
        height: auto !important; 
        padding: 8px 5px !important; 
        background-color: rgba(255,255,255,0.1) !important; 
        border: none !important;
        border-radius: 8px !important;
        display: flex;
        align-items: center;
    }

    .select2-container--default .select2-selection--single .select2-selection__rendered {
        color: white !important;
        padding-left: 10px;
        font-size: 15px !important; 
        line-height: normal;
    }
    
    .select2-container--default .select2-selection--single .select2-selection__arrow {
        height: 100%;
        top: 0;
        right: 10px;
    }
    .select2-container--default .select2-selection--single .select2-selection__arrow b {
        border-color: white transparent transparent transparent;
        border-width: 6px 5px 0 5px; 
    }

    .select2-dropdown {
        background-color: #0f2a45 !important; 
        border: 2px solid #3f72af !important; 
        border-radius: 8px !important;
        color: white !important;
        z-index: 9999;
        margin-top: 5px; 
        box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }

    .select2-results__option {
        background-color: #0f2a45; 
        color: #e6e6e6;
        padding: 12px 15px !important; 
        font-size: 15px !important;    
        border-bottom: 1px solid rgba(255,255,255,0.05); 
    }

    .select2-container--default .select2-results__option--highlighted.select2-results__option--selectable {
        background-color: #3f72af !important; 
        color: white !important;
        font-weight: bold;
    }

    .select2-search--dropdown { padding: 10px; }
    .select2-search__field {
        background-color: #071522 !important; 
        color: white !important;
        border: 1px solid #3f72af !important;
        border-radius: 6px !important;
        padding: 10px 12px !important; 
        font-size: 15px !important;
    }
</style>
</head>
<body>

<header>{% if form.instance.pk %}Edit Gaji{% else %}Tambah Gaji{% endif %}</header>

<div class="wrapper">
    <div class="card">
        
        <div class="info-box">
            ‚ÑπÔ∏è <b>Info:</b> Gaji Pokok akan terisi otomatis berdasarkan jabatan pegawai (Guru, Admin, Staff).
        </div>

        <form method="POST">
            {% csrf_token %}

            <label>Pegawai (Cari Nama/NIP)</label>
            <select name="pegawai" id="id_pegawai" required>
                <option value="" disabled selected>-- Cari Pegawai --</option>
                {% for p in form.fields.pegawai.queryset %}
                    <option value="{{ p.id }}" {% if form.instance.pegawai.id == p.id %}selected{% endif %}>
                        {{ p.nama }} - {{ p.jabatan }}
                    </option>
                {% endfor %}
            </select>

            <label>Bulan Gaji</label>
            {{ form.bulan }}

            <label>Nominal Tunjangan (Jika ada)</label>
            {{ form.tunjangan_jabatan }}

            <label>Keterangan Tunjangan</label>
            {{ form.keterangan_tunjangan }}
            
            <label>Status Transfer Bank</label>
            {{ form.status_transfer }}

            <button type="submit" class="button">üíæ Simpan</button>
            <a href="{% url 'gaji_list' %}" class="button" style="background:#555;">‚è™ Batal</a>
        </form>

    </div>
</div>

<script>
    $(document).ready(function() {
        $('#id_pegawai').select2({
            placeholder: "Ketik nama pegawai...",
            allowClear: true
        });
    });
</script>

</body>
</html>